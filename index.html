<!DOCTYPE HTML>
<head>
    <title>Machi Koro</title>
    <link href = 'indexstyle.css' rel = 'stylesheet' >
</head>
<body>
<div id="playerContainer">
    <div id="Player1" class = "Player">
    <h4>Player: </h4>
    <h4 id="player1"></h4>
    <h4>Coins: </h4>
    <h4 id="coins1"></h4>
    </div>
    <div id="Player2" class = "Player">
    <h4>Player: </h4>
    <h4 id="player2"></h4>
    <h4>Coins: </h4>
    <h4 id="coins2"></h4>
    </div>
    <div id="Player3" class = "Player">
    <h4>Player: </h4>
    <h4 id="player3"></h4>
    <h4>Coins: </h4>
    <h4 id="coins3"></h4>
    </div>
    <div id="Player4" class = "Player">
    <h4>Player: </h4>
    <h4 id="player4"></h4>
    <h4>Coins: </h4>
    <h4 id="coins4"></h4>
    </div>
    <div id="diceroll">
        <h4>Current Dice Roll: </h4>
        <h1 id="rollValue" style="text-align:center"></h1>
    </div>
</div>
<div class="low-card-row">
    <div class="card1">  
    <h1 id="cardNum1"></h1>
    <h1 id="icon1"></h1>
    <p id="cardName1"></p>
    <p id="type1"></p>
    <p id="effect1"></p>
    <h2 id='cost1'></h2>
</div>
<div class="card2">
    <h1 id="cardNum2"></h1>
    <h1 id="icon2"></h1>
    <p id="cardName2"></p>
    <p id="type2"></p>
    <p id="effect2"></p>
    <h2 id='cost2'></h2>
</div>
<div class="card3">
    <h1 id="cardNum3"></h1>
    <h1 id="icon3"></h1>
    <p id="cardName3"></p>
    <p id="type3"></p>
    <p id="effect3"></p>
    <h2 id='cost3'></h2>
</div>
<div class="card4">
    <h1 id="cardNum4"></h1>
    <h1 id="icon4"></h1>
    <p id="cardName4"></p>
    <p id="type4"></p>
    <p id="effect4"></p>
    <h2 id='cost4'></h2>
</div>
<div class="card5">
    <h1 id="cardNum5"></h1>
    <h1 id="icon5"></h1>
    <p id="cardName5"></p>
    <p id="type5"></p>
    <p id="effect5"></p>
    <h2 id='cost5'></h2>
</div>
<div class="selectedCard">
        <h4>Selected Low Card</h4>
        <h1 id="cardNumS"></h1>
        <h1 id="iconS"></h1>
        <p id="cardNameS"></p>
        <p id="typeS"></p>
        <p id="effectS"></p>
        <h2 id='costS'></h2>
    </div>
</div>

<div class="major-card-row">
    <div class="card1">  
            <h1 id="cardNum1"></h1>
            <h1 id="icon1"></h1>
            <p id="cardName1"></p>
            <p id="type1"></p>
            <p id="effect1"></p>
            <h2 id='cost1'></h2>
</div>
<div class="card2">
        <h1 id="cardNum2"></h1>
        <h1 id="icon2"></h1>
        <p id="cardName2"></p>
        <p id="type2"></p>
        <p id="effect2"></p>
        <h2 id='cost2'></h2>
</div>
<div class="card3">
        <h1 id="cardNum3"></h1>
        <h1 id="icon3"></h1>
        <p id="cardName3"></p>
        <p id="type3"></p>
        <p id="effect3"></p>
        <h2 id='cost3'></h2>
</div>
<div class="card4">
        <h1 id="cardNum4"></h1>
        <h1 id="icon4"></h1>
        <p id="cardName4"></p>
        <p id="type4"></p>
        <p id="effect4"></p>
        <h2 id='cost4'></h2>
</div>
<div class="card5">
        <h1 id="cardNum5"></h1>
        <h1 id="icon5"></h1>
        <p id="cardName5"></p>
        <p id="type5"></p>
        <p id="effect5"></p>
        <h2 id='cost5'></h2>
</div>
<div class="selectedCard">
        <h4>Selected Major Card</h4>
        <h1 id="cardNumS"></h1>
        <h1 id="iconS"></h1>
        <p id="cardNameS"></p>
        <p id="typeS"></p>
        <p id="effectS"></p>
        <h2 id='costS'></h2>
    </div>
</div>


<div class="high-card-row">
    <div class="card1">  
            <h1 id="cardNum1"></h1>
            <h1 id="icon1"></h1>
            <p id="cardName1"></p>
            <p id="type1"></p>
            <p id="effect1"></p>
            <h2 id='cost1'></h2>
</div>
<div class="card2">
        <h1 id="cardNum2"></h1>
        <h1 id="icon2"></h1>
        <p id="cardName2"></p>
        <p id="type2"></p>
        <p id="effect2"></p>
        <h2 id='cost2'></h2>
</div>
<div class="card3">
        <h1 id="cardNum3"></h1>
        <h1 id="icon3"></h1>
        <p id="cardName3"></p>
        <p id="type3"></p>
        <p id="effect3"></p>
        <h2 id='cost3'></h2>
</div>
<div class="card4">
        <h1 id="cardNum4"></h1>
        <h1 id="icon4"></h1>
        <p id="cardName4"></p>
        <p id="type4"></p>
        <p id="effect4"></p>
        <h2 id='cost4'></h2>
</div>
<div class="card5">
        <h1 id="cardNum5"></h1>
        <h1 id="icon5"></h1>
        <p id="cardName5"></p>
        <p id="type5"></p>
        <p id="effect5"></p>
        <h2 id='cost5'></h2>
</div>
<div class="selectedCard">
        <h4>Selected High Card</h4>
        <h1 id="cardNumS"></h1>
        <h1 id="iconS"></h1>
        <p id="cardNameS"></p>
        <p id="typeS"></p>
        <p id="effectS"></p>
        <h2 id='costS'></h2>
    </div>
</div>
  
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
    var info = '';
    let deckLow = [];
    let deckMajor = [];
    let deckHigh = [];

    var tempPlayer = {
        name:"Jon Snow",
        money:10,
        cards: [],
        landmarks: [],
        isTurn: false,
    };

    var tempPlayer1 = {
        name:"Khalessi",
        money:10,
        cards: [],
        landmarks: [],
        isTurn: false,
    };
   
    var tempPlayer2 = {
        name:"Player4",
        money:10,
        cards: [],
        landmarks: [],
        isTurn: false,
    };

    var Player1 ={name:"",money:0,cards:{restaurant:[],primary:[],secondary:[], major:[]},landmarks:[],isTurn:false,diceroll:0};
    var Player2 ={name:"",money:0,cards:{restaurant:[],primary:[],secondary:[], major:[]},landmarks:[],isTurn:false,diceroll:0};
    var Player3 ={name:"",money:0,cards:{restaurant:[],primary:[],secondary:[], major:[]},landmarks:[],isTurn:false,diceroll:0};
    var Player4 ={name:"",money:0,cards:{restaurant:[],primary:[],secondary:[], major:[]},landmarks:[],isTurn:false,diceroll:0};
    

    var currentPlayer;

    function diceRoll () {
        return Math.floor(Math.random()*6) + 1;
    }

    function assignRoll(player){
        player.diceroll = diceRoll();
        console.log(player);
    }

    function decideTurn (Players){
        Players.forEach(assignRoll);
        let decider = 0;
        let returnIndex = 0;
        for(let i = 0; i< Players.length; i++)
        {
            if(Players[i].diceroll > decider)
            {
                decider = Players[i].diceroll
                returnIndex = i;
            }
        }
        return returnIndex;

    }

    var index;
    function nextPlayer (Players, rollhtml,playerDisplays) {
        currentPlayer.isTurn = false;
        unhighlightTurn(playerDisplays, index)
        console.log(currentPlayer);
        index++;
        if (index > Players.length-1)
        {
            console.log(index);
            index = 0;
        }
        console.log(Players[index])
        currentPlayer = Players[index];
        highlightTurn(playerDisplays,index)
        currentPlayer.isTurn = true;
        currentPlayer.diceroll = diceRoll();
        rollhtml.html(currentPlayer.diceroll);
        console.log(currentPlayer);
    }

    function highlightTurn(playerDisplays, index){
        playerDisplays[index].css('background-color','yellow');
    }

    function unhighlightTurn(playerDisplays, index){
        playerDisplays[index].css('background-color','white');
    }

    function editMoney(Player,moneyDisplay, value)
    {
        Player.money += value;
        moneyDisplay.html(Player.money);
    }

    function validateTransaction(currentPlayer, card)
    {
        if (card.cost > currentPlayer.money)
            return false;
        else   
        {
            return true;
        }
    }

    
   class Player {
       constructor(name, money, cards, landmarks, isTurn, playerNumber) {
           this.name = name;
           this.money = money;
           this.cards = cards;
           this.landmarks = landmarks;
           this.isTurn = isTurn;
           this.playerNumber = playerNumber;
       }
   }

   var Player123 = new Player("Adam",300,{restaurant:[],primary:[],secondary:[], major:[]},[],false,123);

    
    function createPlayer(data, Player){
        Player.name = data.name;
        Player.money = data.money;
        Player.isTurn = data.isTurn;

    } 


    function displayPlayers(Players)
    {
        let basep = '#player';
        let basec = '#coins'
        for (i = 0; i <= Players.length-1; i++)
        {
            var stringp = basep + (i+1);
            var stringc = basec + (i+1);
            console.log(stringp);
            console.log(stringc);
            $(stringp).html(Players[i].name);
            $(stringc).html(Players[i].money);
        }
    }
    
    
    //var Player1 ={name:"",money:0,cards:[],landmarks:[],isTurn:false,}


$(document).ready(function(){
    createPlayer(tempPlayer,Player1)
    createPlayer(tempPlayer1,Player2)
    createPlayer(tempPlayer2,Player3);
    let Players = [Player123, Player1, Player2, Player3];
    index = decideTurn(Players);
    console.log(index);
    displayPlayers(Players);
    
    currentPlayer = Players[index];
    currentPlayer.isTurn= true;
    currentPlayer.diceroll = diceRoll();
    //low deck
    let rollhtml = $('#rollValue');
    rollhtml.html(currentPlayer.diceroll);
    let p1 = $("#Player1");
    let p2 = $("#Player2");
    let p3 = $("#Player3");
    let p4 = $("#Player4");
    let c1 = $("#coins1");
    let c2 = $("#coins2");
    let c3 = $("#coins3");
    let c4 = $("#coins4");
    let playerDisplays = [p1,p2,p3,p4];
    let moneyDisplays = [c1,c2,c3,c4];
    highlightTurn(playerDisplays, index);
    let lowNum1 = $(".low-card-row #cardNum1");
    let lowName1  = $(".low-card-row #cardName1");
    let lowIcon1 = $(".low-card-row #icon1");
    let lowType1 = $(".low-card-row #type1");
    let lowEffect1 = $(".low-card-row #effect1");
    let lowCost1 = $(".low-card-row #cost1");
    let lowNum2 = $(".low-card-row #cardNum2");
    let lowName2 = $(".low-card-row #cardName2");
    let lowIcon2 = $(".low-card-row #icon2");
    let lowType2 = $(".low-card-row #type2");
    let lowEffect2 = $(".low-card-row #effect2");
    let lowCost2 = $(".low-card-row #cost2");
    let lowNum3 = $(".low-card-row #cardNum3");
    let lowName3 = $(".low-card-row #cardName3");
    let lowIcon3 = $(".low-card-row #icon3");
    let lowType3 = $(".low-card-row #type3");
    let lowEffect3 = $(".low-card-row #effect3");
    let lowCost3 = $(".low-card-row #cost3");
    let lowNum4 = $(".low-card-row #cardNum4");
    let lowName4 = $(".low-card-row #cardName4");
    let lowIcon4 = $(".low-card-row #icon4");
    let lowType4 = $(".low-card-row #type4");
    let lowEffect4 = $(".low-card-row #effect4");
    let lowCost4 = $(".low-card-row #cost4");
    let lowNum5 = $(".low-card-row #cardNum5");
    let lowName5 = $(".low-card-row #cardName5");
    let lowIcon5 = $(".low-card-row #icon5");
    let lowType5 = $(".low-card-row #type5");
    let lowEffect5 = $(".low-card-row #effect5");
    let lowCost5 = $(".low-card-row #cost5");
    let lowNumS = $(".low-card-row #cardNumS");
    let lowNameS = $(".low-card-row #cardNameS");
    let lowIconS = $(".low-card-row #iconS");
    let lowTypeS = $(".low-card-row #typeS");
    let lowEffectS = $(".low-card-row #effectS");
    let lowCostS = $(".low-card-row #costS");


    let majorNum1 = $(".major-card-row #cardNum1");
    let majorName1 = $(".major-card-row #cardName1");
    let majorIcon1 = $(".major-card-row #icon1");
    let majorType1 = $(".major-card-row #type1");
    let majorEffect1 = $(".major-card-row #effect1");
    let majorCost1 = $(".major-card-row #cost1");
    let majorNum2 = $(".major-card-row #cardNum2");
    let majorName2 = $(".major-card-row #cardName2");
    let majorIcon2 = $(".major-card-row #icon2");
    let majorType2 = $(".major-card-row #type2");
    let majorEffect2 = $(".major-card-row #effect2");
    let majorCost2 = $(".major-card-row #cost2");
    let majorNum3 = $(".major-card-row #cardNum3");
    let majorName3 = $(".major-card-row #cardName3");
    let majorIcon3 = $(".major-card-row #icon3");
    let majorType3 = $(".major-card-row #type3");
    let majorEffect3 = $(".major-card-row #effect3");
    let majorCost3 = $(".major-card-row #cost3");
    let majorNum4 = $(".major-card-row #cardNum4");
    let majorName4 = $(".major-card-row #cardName4");
    let majorIcon4 = $(".major-card-row #icon4");
    let majorType4 = $(".major-card-row #type4");
    let majorEffect4 = $(".major-card-row #effect4");
    let majorCost4 = $(".major-card-row #cost4");
    let majorNum5 = $(".major-card-row #cardNum5");
    let majorName5 = $(".major-card-row #cardName5");
    let majorIcon5 = $(".major-card-row #icon5");
    let majorType5 = $(".major-card-row #type5");
    let majorEffect5 = $(".major-card-row #effect5");
    let majorCost5 = $(".major-card-row #cost5");
    let majorNumS = $(".major-card-row #cardNumS");
    let majorNameS = $(".major-card-row #cardNameS");
    let majorIconS = $(".major-card-row #iconS");
    let majorTypeS = $(".major-card-row #typeS");
    let majorEffectS = $(".major-card-row #effectS");
    let majorCostS = $(".major-card-row #costS");

    //high deck
    let highNum1 = $(".high-card-row #cardNum1");
    let highName1  = $(".high-card-row #cardName1");
    let highIcon1 = $(".high-card-row #icon1");
    let highType1 = $(".high-card-row #type1");
    let highEffect1 = $(".high-card-row #effect1");
    let highCost1 = $(".high-card-row #cost1");
    let highNum2 = $(".high-card-row #cardNum2");
    let highName2 = $(".high-card-row #cardName2");
    let highIcon2 = $(".high-card-row #icon2");
    let highType2 = $(".high-card-row #type2");
    let highEffect2 = $(".high-card-row #effect2");
    let highCost2 = $(".high-card-row #cost2");
    let highNum3 = $(".high-card-row #cardNum3");
    let highName3 = $(".high-card-row #cardName3");
    let highIcon3 = $(".high-card-row #icon3");
    let highType3 = $(".high-card-row #type3");
    let highEffect3 = $(".high-card-row #effect3");
    let highCost3 = $(".high-card-row #cost3");
    let highNum4 = $(".high-card-row #cardNum4");
    let highName4 = $(".high-card-row #cardName4");
    let highIcon4 = $(".high-card-row #icon4");
    let highType4 = $(".high-card-row #type4");
    let highEffect4 = $(".high-card-row #effect4");
    let highCost4 = $(".high-card-row #cost4");
    let highNum5 = $(".high-card-row #cardNum5");
    let highName5 = $(".high-card-row #cardName5");
    let highIcon5 = $(".high-card-row #icon5");
    let highType5 = $(".high-card-row #type5");
    let highEffect5 = $(".high-card-row #effect5");
    let highCost5 = $(".high-card-row #cost5");
    let highNumS = $(".high-card-row #cardNumS");
    let highNameS = $(".high-card-row #cardNameS");
    let highIconS = $(".high-card-row #iconS");
    let highTypeS = $(".high-card-row #typeS");
    let highEffectS = $(".high-card-row #effectS");
    let highCostS = $(".high-card-row #costS");

    console.log("Getting JSON");
    $.getJSON("card_information.json",function(data){
      console.log('reading card info');
        $.each(data, function(index, value){
            if(value.type === "major establishment")
            while(value.quantity !== 0){
                value.quantity--;
                deckMajor.push(value);
            }
           else if(value.activation <= 6)
            while(value.quantity !== 0){
                value.quantity--;
                deckLow.push(value);
            }
            else if (value.activation > 6)
            while(value.quantity !== 0){
                value.quantity--;
                deckHigh.push(value);
            }
        }
        )

    console.log('Got DOM');
//    let highNum5 = $("#cardNum5");
//    let highName5 = $("#cardName5");
//    let highIcon5 = $("#icon5");
    
        console.log(deckLow.length);
        console.log(deckLow);
        console.log(deckHigh);
        console.log(deckMajor);
       console.log("It Worked");
       let lowIndex=0;
       let highIndex=0;
       let majorIndex=0;
       var drawnCard;


       function changeLowIndex(){
        lowIndex= Math.floor(Math.random()*deckLow.length);
       }
       function changeMajorIndex(){     
        majorIndex = Math.floor(Math.random()*deckMajor.length);
       }
       function changeHighIndex(){     
        highIndex = Math.floor(Math.random()*deckHigh.length);
       }
      
       function drawLowCard(){
          drawnCard = deckLow[lowIndex];
          deckLow.splice(lowIndex,1);
          console.log(drawnCard);
          console.log(deckLow);
       }

       function drawMajorCard(){
          drawnCard = deckMajor[majorIndex];
          deckMajor.splice(majorIndex,1);
          console.log(drawnCard);
          console.log(deckMajor);
       }

       function drawHighCard(){
          drawnCard = deckHigh[highIndex];
          deckHigh.splice(highIndex,1);
          console.log(drawnCard);
          console.log(deckHigh);
       }

       //low cards
       function assignLowCard1(card){
           lowNum1.html(card.activation);
           lowName1.html(card.name);
           lowIcon1.html(card.icon);
           lowType1.html(card.type);
           lowEffect1.html(card.effect);
           lowCost1.html(card.cost);
           changeLowIndex();
           console.log('assigned card 1');
       }
       function assignLowCard2(card){
           lowNum2.html(card.activation);
           lowName2.html(card.name);
           lowIcon2.html(card.icon);
           lowType2.html(card.type);
           lowEffect2.html(card.effect);
           lowCost2.html(card.cost);
           changeLowIndex();
           console.log('assigned card 2');
       }
       function assignLowCard3(card){

           lowNum3.html(card.activation);
           lowName3.html(card.name);
           lowIcon3.html(card.icon);
           lowType3.html(card.type);
           lowEffect3.html(card.effect);
           lowCost3.html(card.cost);
           changeLowIndex();
           console.log('assigned card 3');
       }
       function assignLowCard4(card){
           lowNum4.html(card.activation);
           lowName4.html(card.name);
           lowIcon4.html(card.icon);
           lowType4.html(card.type);
           lowEffect4.html(card.effect);
           lowCost4.html(card.cost);
           changeLowIndex();
           console.log('assigned card 4');
       }
       function assignLowCard5(card){
           lowNum5.html(card.activation);
           lowName5.html(card.name);
           lowIcon5.html(card.icon);
           lowType5.html(card.type);
           lowEffect5.html(card.effect);
           lowCost5.html(card.cost);
           changeLowIndex();
           console.log('assigned card 5');
       }
       function assignLowCardS(card){
           lowNumS.html(card.num);
           lowNameS.html(card.name);
           lowIconS.html(card.icon);
           lowTypeS.html(card.type);
           lowEffectS.html(card.effect);
           lowCostS.html(card.cost);
           changeLowIndex();
           console.log('assigned card Selected');
       }

       //major cards
       function assignMajorCard1(card){
           majorNum1.html(card.activation);
           majorName1.html(card.name);
           majorIcon1.html(card.icon);
           majorType1.html(card.type);
           majorEffect1.html(card.effect);
           majorCost1.html(card.cost);
           changeMajorIndex();
           console.log('assigned card 1M');
       }
       function assignMajorCard2(card){
        majorNum2.html(card.activation);
        majorName2.html(card.name);
        majorIcon2.html(card.icon);
        majorType2.html(card.type);
        majorEffect2.html(card.effect);
        majorCost2.html(card.cost);
        changeMajorIndex();
        console.log('assigned card 2M');
       }
       function assignMajorCard3(card){
        majorNum3.html(card.activation);
        majorName3.html(card.name);
        majorIcon3.html(card.icon);
        majorType3.html(card.type);
        majorEffect3.html(card.effect);
        majorCost3.html(card.cost);
        changeMajorIndex();
        console.log('assigned card 3M');
       }
       function assignMajorCard4(card){
        majorNum4.html(card.activation);
        majorName4.html(card.name);
        majorIcon4.html(card.icon);
        majorType4.html(card.type);
        majorEffect4.html(card.effect);
        majorCost4.html(card.cost);
        changeMajorIndex();
        console.log('assigned card 4M');
       }
       function assignMajorCard5(card){
        majorNum5.html(card.activation);
        majorName5.html(card.name);
        majorIcon5.html(card.icon);
        majorType5.html(card.type);
        majorEffect5.html(card.effect);
        majorCost5.html(card.cost);
        changeMajorIndex();
        console.log('assigned card 5M');
       }
       function assignMajorCardS(card){
        majorNumS.html(card.num);
        majorNameS.html(card.name);
        majorIconS.html(card.icon);
        majorTypeS.html(card.type);
        majorEffectS.html(card.effect);
        majorCostS.html(card.cost);
        changeMajorIndex();
        console.log('assigned card SM');
       }

       //high cards
       function assignHighCard1(card){
           highNum1.html(card.activation);
           highName1.html(card.name);
           highIcon1.html(card.icon);
           highType1.html(card.type);
           highEffect1.html(card.effect);
           highCost1.html(card.cost);
           changeHighIndex();
           console.log('assigned card 1H');
       }
       function assignHighCard2(card){
        highNum2.html(card.activation);
        highName2.html(card.name);
        highIcon2.html(card.icon);
        highType2.html(card.type);
        highEffect2.html(card.effect);
        highCost2.html(card.cost);
        changeHighIndex();
        console.log('assigned card 2H');
       }
       function assignHighCard3(card){
        highNum3.html(card.activation);
        highName3.html(card.name);
        highIcon3.html(card.icon);
        highType3.html(card.type);
        highEffect3.html(card.effect);
        highCost3.html(card.cost);
        changeHighIndex();
        console.log('assigned card 3H');
       }
       function assignHighCard4(card){
        highNum4.html(card.activation);
        highName4.html(card.name);
        highIcon4.html(card.icon);
        highType4.html(card.type);
        highEffect4.html(card.effect);
        highCost4.html(card.cost);
        changeHighIndex();
        console.log('assigned card 4H');
       }
       function assignHighCard5(card){
        highNum5.html(card.activation);
        highName5.html(card.name);
        highIcon5.html(card.icon);
        highType5.html(card.type);
        highEffect5.html(card.effect);
        highCost5.html(card.cost);
        changeHighIndex();
        console.log('assigned card 5H');
       }
       function assignHighCardS(card){
        console.log("Hello");
        highNumS.html(card.num);
        highNameS.html(card.name);
        highIconS.html(card.icon);
        highTypeS.html(card.type);
        highEffectS.html(card.effect);
        highCostS.html(card.cost);
        changeHighIndex();
        console.log('assigned card SH');
       }

       function assignCards(){
           console.log('assigning initial cards');
        changeLowIndex();
        changeHighIndex();
           drawLowCard();
           assignLowCard1(drawnCard);
           drawMajorCard();
           assignMajorCard1(drawnCard);
           drawHighCard();
           assignHighCard1(drawnCard);
           drawLowCard();
           assignLowCard2(drawnCard);
           drawMajorCard();
           assignMajorCard2(drawnCard);
           drawHighCard();
           assignHighCard2(drawnCard);
           drawLowCard();
           assignLowCard3(drawnCard);
           drawMajorCard();
           assignMajorCard3(drawnCard);
           drawHighCard();
           assignHighCard3(drawnCard);
           drawLowCard();
           assignLowCard4(drawnCard);
           drawMajorCard();
           assignMajorCard4(drawnCard);
           drawHighCard();
           assignHighCard4(drawnCard);
           drawLowCard();
           assignLowCard5(drawnCard);
           drawMajorCard();
           assignMajorCard5(drawnCard);
           drawHighCard();
           assignHighCard5(drawnCard);
        }
        assignCards();
       
    //    changeLowIndex();
    //     changeHighIndex();
    //     drawCard();
    //     assignCard1(drawnCard);
    //     drawCard();
    //     assignCard2(drawnCard);
    //     drawCard();
    //     assignCard3(drawnCard);
    //     drawCard();
    //     assignCard4(drawnCard);
    //     drawCard();
    //     assignCard5(drawnCard);

       function addCard(player, card)
       {
           console.log(card);
        if (card.type === 'primary industry')
            player.cards.primary.push(card);
        else if (card.type === 'secondary industry')
            player.cards.secondary.push(card);
        else if (card.type === 'restaurants')
            player.cards.restaurant.push(card);
        else if (card.type === 'major establishment')
            player.cards.major.push(card);     
       }

        $(".low-card-row .card1").on("click", function(){
            var selectedCard = {num:0,name:"",icon:"",type:"",effect:"",cost:0};
            let selected = $(this);
            selectedCard.num = +Number((selected.find(lowNum1).text()));
            selectedCard.name= selected.find(lowName1).text();
            selectedCard.icon= selected.find(lowIcon1).text();
            selectedCard.type = selected.find(lowType1).text();
            selectedCard.effect = selected.find(lowEffect1).text();
            selectedCard.cost = +Number((selected.find(lowCost1).text()));
            console.log(selectedCard);
            if(validateTransaction(currentPlayer,selectedCard))
            {
                editMoney(currentPlayer,moneyDisplays[index],-1*selectedCard.cost)
                addCard(currentPlayer, selectedCard);
                nextPlayer(Players, rollhtml,playerDisplays);
           
            if(deckLow.length === 0)
            {
                selected.children().css("display",'none');
                assignCardS(selectedCard);
            }
            else{
            drawLowCard();
            assignLowCard1(drawnCard);
            assignLowCardS(selectedCard);
            }
            }
            else{alert('Cannot purchase card')};
            console.log(currentPlayer);
            
        })

        $(".major-card-row .card1").on("click", function(){
            var selectedCard = {num:0,name:"",icon:""};
            let selected = $(this);
            selectedCard.num = +Number((selected.find(majorNum1).text()));
            selectedCard.name= selected.find(majorName1).text();
            selectedCard.icon= selected.find(majorIcon1).text();
            selectedCard.type = selected.find(majorType1).text();
            selectedCard.effect = selected.find(majorEffect1).text();
            selectedCard.cost = +Number((selected.find(majorCost1).text()));
            console.log(selectedCard);
            if(validateTransaction(currentPlayer,selectedCard))
            {
                editMoney(currentPlayer,moneyDisplays[index],-1*selectedCard.cost)
                addCard(currentPlayer, selectedCard);
                nextPlayer(Players, rollhtml, playerDisplays);
            if(deckMajor.length === 0)
            {
                selected.children().css("display",'none');
                assignMajorCardS(selectedCard);
            }
            else{
            drawMajorCard();
            assignMajorCard1(drawnCard);
            assignMajorCardS(selectedCard);
            }
            }
            else{alert('Cannot purchase card')};
            console.log(currentPlayer);
            
        })

        $(".high-card-row .card1").on("click", function(){
            var selectedCard = {num:0,name:"",icon:""};
            let selected = $(this);
            selectedCard.num = +Number((selected.find(highNum1).text()));
            console.log(selectedCard.num);
            selectedCard.name= selected.find(highName1).text();
            selectedCard.icon= selected.find(highIcon1).text();
            selectedCard.type = selected.find(highType1).text();
            selectedCard.effect = selected.find(highEffect1).text();
            selectedCard.cost = +Number((selected.find(highCost1).text()));
            console.log(selectedCard);
            if(validateTransaction(currentPlayer,selectedCard))
            {
                editMoney(currentPlayer,moneyDisplays[index],-1*selectedCard.cost)
                addCard(currentPlayer, selectedCard);
                nextPlayer(Players, rollhtml, playerDisplays);
            if(deckHigh.length === 0)
            {
                selected.children().css("display",'none');
                assignHighCardS(selectedCard);
            }
            else{
            drawHighCard();
            assignHighCard1(drawnCard);
            assignHighCardS(selectedCard);
            }
            }
            else{alert('Cannot purchase card')};
            console.log(currentPlayer);
            
        })

        $(".low-card-row .card2").on("click", function(){
            var selectedCard = {num:0,name:"",icon:""};
            let selected = $(this);
            selectedCard.num = +Number((selected.find(lowNum2).text()));
            selectedCard.name= selected.find(lowName2).text();
            selectedCard.icon= selected.find(lowIcon2).text();
            selectedCard.type = selected.find(lowType2).text();
            selectedCard.effect = selected.find(lowEffect2).text();
            selectedCard.cost = +Number((selected.find(lowCost2).text()));
            console.log(selectedCard);
            if(validateTransaction(currentPlayer,selectedCard))
            {
                editMoney(currentPlayer,moneyDisplays[index],-1*selectedCard.cost)
                addCard(currentPlayer, selectedCard);
                nextPlayer(Players, rollhtml, playerDisplays);
            
            if(deckLow.length === 0)
            {
                selected.children().css("display",'none');
                assignCardS(selectedCard);
            }
            else{
            drawLowCard();
            assignLowCard2(drawnCard);
            assignLowCardS(selectedCard);
            }
            }
            else{alert('Cannot purchase card')};
            console.log(currentPlayer);
            
        })

        $(".major-card-row .card2").on("click", function(){
            var selectedCard = {num:0,name:"",icon:""};
            let selected = $(this);
            selectedCard.num = +Number((selected.find(majorNum2).text()));
            selectedCard.name= selected.find(majorName2).text();
            selectedCard.icon= selected.find(majorIcon2).text();
            selectedCard.type = selected.find(majorType2).text();
            selectedCard.effect = selected.find(majorEffect2).text();
            selectedCard.cost = +Number((selected.find(majorCost2).text()));
            console.log(selectedCard);
            if(validateTransaction(currentPlayer,selectedCard))
            {
                editMoney(currentPlayer,moneyDisplays[index],-1*selectedCard.cost)
                addCard(currentPlayer, selectedCard);
                nextPlayer(Players, rollhtml, playerDisplays);
            if(deckMajor.length === 0)
            {
                selected.children().css("display",'none');
                assignMajorCardS(selectedCard);
            }
            else{
            drawMajorCard();
            assignMajorCard2(drawnCard);
            assignMajorCardS(selectedCard);
            }
            }
            else{alert('Cannot purchase card')};
            console.log(currentPlayer);
            
        })

        $(".high-card-row .card2").on("click", function(){
            var selectedCard = {num:0,name:"",icon:""};
            let selected = $(this);
            selectedCard.num = +Number((selected.find(highNum2).text()));
            selectedCard.name= selected.find(highName2).text();
            selectedCard.icon= selected.find(highIcon2).text();
            selectedCard.type = selected.find(highType2).text();
            selectedCard.effect = selected.find(highEffect2).text();
            selectedCard.cost = +Number((selected.find(highCost2).text()));
            console.log(selectedCard);
            if(validateTransaction(currentPlayer,selectedCard))
            {
                editMoney(currentPlayer,moneyDisplays[index],-1*selectedCard.cost)
                addCard(currentPlayer, selectedCard);
                nextPlayer(Players, rollhtml, playerDisplays);
            if(deckHigh.length === 0)
            {
                selected.children().css("display",'none');
                assignHighCardS(selectedCard);
            }
            else{
            drawHighCard();
            assignHighCard2(drawnCard);
            assignHighCardS(selectedCard);
            }
            }
            else{alert('Cannot purchase card')};
            console.log(currentPlayer);
            
        })

        $(".low-card-row .card3").on("click", function(){
            var selectedCard = {num:0,name:"",icon:""};
            let selected = $(this);
            selectedCard.num = +Number((selected.find(lowNum3).text()));
            selectedCard.name= selected.find(lowName3).text();
            selectedCard.icon= selected.find(lowIcon3).text();
            selectedCard.type = selected.find(lowType3).text();
            selectedCard.effect = selected.find(lowEffect3).text();
            selectedCard.cost = +Number((selected.find(lowCost3).text()));
            console.log(selectedCard);
            if(validateTransaction(currentPlayer,selectedCard))
            {
                editMoney(currentPlayer,moneyDisplays[index],-1*selectedCard.cost)
                addCard(currentPlayer, selectedCard);
                nextPlayer(Players, rollhtml, playerDisplays);
            
            if(deckLow.length === 0)
            {
                selected.children().css("display",'none');
                assignCardS(selectedCard);
            }
            else{
            drawLowCard();
            assignLowCard3(drawnCard);
            assignLowCardS(selectedCard);
            }
            }
            else{alert('Cannot purchase card')};
            console.log(currentPlayer);
            
        })

        $(".major-card-row .card3").on("click", function(){
            var selectedCard = {num:0,name:"",icon:""};
            let selected = $(this);
            selectedCard.num = +Number((selected.find(majorNum3).text()));
            selectedCard.name= selected.find(majorName3).text();
            selectedCard.icon= selected.find(majorIcon3).text();
            selectedCard.type = selected.find(majorType3).text();
            selectedCard.effect = selected.find(majorEffect3).text();
            selectedCard.cost = +Number((selected.find(majorCost3).text()));
            console.log(selectedCard);
            if(validateTransaction(currentPlayer,selectedCard))
            {
                editMoney(currentPlayer,moneyDisplays[index],-1*selectedCard.cost)
                addCard(currentPlayer, selectedCard);
                nextPlayer(Players, rollhtml, playerDisplays);
            if(deckMajor.length === 0)
            {
                selected.children().css("display",'none');
                assignMajorCardS(selectedCard);
            }
            else{
            drawMajorCard();
            assignMajorCard3(drawnCard);
            assignMajorCardS(selectedCard);
            }
            }
            else{alert('Cannot purchase card')};
            console.log(currentPlayer);
            
        })

        $(".high-card-row .card3").on("click", function(){
            var selectedCard = {num:0,name:"",icon:""};
            let selected = $(this);
            selectedCard.num = +Number((selected.find(highNum3).text()));
            selectedCard.name= selected.find(highName3).text();
            selectedCard.icon= selected.find(highIcon3).text();
            selectedCard.type = selected.find(highType3).text();
            selectedCard.effect = selected.find(highEffect3).text();
            selectedCard.cost = +Number((selected.find(highCost3).text()));
            console.log(selectedCard);
            if(validateTransaction(currentPlayer,selectedCard))
            {
                editMoney(currentPlayer,moneyDisplays[index],-1*selectedCard.cost)
                addCard(currentPlayer, selectedCard);
                nextPlayer(Players, rollhtml, playerDisplays);
            if(deckHigh.length === 0)
            {
                selected.children().css("display",'none');
                assignHighCardS(selectedCard);
            }
            else{
            drawHighCard();
            assignHighCard3(drawnCard);
            assignHighCardS(selectedCard);
            }
            }
            else{alert('Cannot purchase card')};
            console.log(currentPlayer);
            
        })

        $(".low-card-row .card4").on("click", function(){
            var selectedCard = {num:0,name:"",icon:""};
            let selected = $(this);
            selectedCard.num = +Number((selected.find(lowNum4).text()));
            selectedCard.name= selected.find(lowName4).text();
            selectedCard.icon= selected.find(lowIcon4).text();
            selectedCard.type = selected.find(lowType4).text();
            selectedCard.effect = selected.find(lowEffect4).text();
            selectedCard.cost = +Number((selected.find(lowCost4).text()));
            console.log(selectedCard);
            if(validateTransaction(currentPlayer,selectedCard))
            {
                editMoney(currentPlayer,moneyDisplays[index],-1*selectedCard.cost)
                addCard(currentPlayer, selectedCard);
                nextPlayer(Players, rollhtml,playerDisplays);
            if(deckLow.length === 0)
            {
                selected.children().css("display",'none');
                assignCardS(selectedCard);
            }
            else {
            drawLowCard();
            assignLowCard4(drawnCard);
            assignLowCardS(selectedCard);
            }
            }
            else{alert('Cannot purchase card')};
            console.log(currentPlayer);
            
        })

        $(".major-card-row .card4").on("click", function(){
            var selectedCard = {num:0,name:"",icon:""};
            let selected = $(this);
            selectedCard.num = +Number((selected.find(majorNum4).text()));
            selectedCard.name= selected.find(majorName4).text();
            selectedCard.icon= selected.find(majorIcon4).text();
            selectedCard.type = selected.find(majorType4).text();
            selectedCard.effect = selected.find(majorEffect4).text();
            selectedCard.cost = +Number((selected.find(majorCost4).text()));
            console.log(selectedCard);
            if(validateTransaction(currentPlayer,selectedCard))
            {
                editMoney(currentPlayer,moneyDisplays[index],-1*selectedCard.cost)
                addCard(currentPlayer, selectedCard);
                nextPlayer(Players, rollhtml,playerDisplays);
            if(deckMajor.length === 0)
            {
                selected.children().css("display",'none');
                assignMajorCardS(selectedCard);
            }
            else{
            drawMajorCard();
            assignMajorCard4(drawnCard);
            assignMajorCardS(selectedCard);
            }
            }
            else{alert('Cannot purchase card')};
            console.log(currentPlayer);
            
        })

        $(".high-card-row .card4").on("click", function(){
            var selectedCard = {num:0,name:"",icon:""};
            let selected = $(this);
            selectedCard.num = +Number((selected.find(highNum4).text()));
            selectedCard.name= selected.find(highName4).text();
            selectedCard.icon= selected.find(highIcon4).text();
            selectedCard.type = selected.find(highType4).text();
            selectedCard.effect = selected.find(highEffect4).text();
            selectedCard.cost = +Number((selected.find(highCost4).text()));
            console.log(selectedCard);
            if(validateTransaction(currentPlayer,selectedCard))
            {
                editMoney(currentPlayer,moneyDisplays[index],-1*selectedCard.cost)
                addCard(currentPlayer, selectedCard);
                nextPlayer(Players,rollhtml,playerDisplays);
            if(deckHigh.length === 0)
            {
                selected.children().css("display",'none');
                assignHighCardS(selectedCard);
            }
            else{
            drawHighCard();
            assignHighCard4(drawnCard);
            assignHighCardS(selectedCard);
            }
            }
            else{alert('Cannot purchase card')};
            console.log(currentPlayer);
            
        })

        $(".low-card-row .card5").on("click", function(){
            var selectedCard = {num:0,name:"",icon:""};
            let selected = $(this);
            selectedCard.num = +Number((selected.find(lowNum5).text()));
            selectedCard.name= selected.find(lowName5).text();
            selectedCard.icon= selected.find(lowIcon5).text();
            selectedCard.type = selected.find(lowType5).text();
            selectedCard.effect = selected.find(lowEffect5).text();
            selectedCard.cost = +Number((selected.find(lowCost5).text()));
            console.log(selectedCard);
            if(validateTransaction(currentPlayer,selectedCard))
            {
                editMoney(currentPlayer,moneyDisplays[index],-1*selectedCard.cost)
                addCard(currentPlayer, selectedCard);
                nextPlayer(Players,rollhtml,playerDisplays);
            if(deckLow.length === 0)
            {
                selected.children().css("display",'none');
                assignCardS(selectedCard);
            }
            else{
            drawLowCard();
            assignLowCard5(drawnCard);
            assignLowCardS(selectedCard);
            }
            }
            else{alert('Cannot purchase card')};
            console.log(currentPlayer);
            
        })

        $(".major-card-row .card5").on("click", function(){
            var selectedCard = {num:0,name:"",icon:""};
            let selected = $(this);
            selectedCard.num = +Number((selected.find(majorNum5).text()));
            selectedCard.name= selected.find(majorName5).text();
            selectedCard.icon= selected.find(majorIcon5).text();
            selectedCard.type = selected.find(majorType5).text();
            selectedCard.effect = selected.find(majorEffect5).text();
            selectedCard.cost = +Number((selected.find(majorCost5).text()));
            console.log(selectedCard);
            if(validateTransaction(currentPlayer,selectedCard))
            {
                editMoney(currentPlayer,moneyDisplays[index],-1*selectedCard.cost)
                addCard(currentPlayer, selectedCard);
                nextPlayer(Players, rollhtml,playerDisplays);
            if(deckMajor.length === 0)
            {
                selected.children().css("display",'none');
                assignMajorCardS(selectedCard);
            }
            else{
            drawMajorCard();
            assignMajorCard5(drawnCard);
            assignMajorCardS(selectedCard);
            }
            }
            else{alert('Cannot purchase card')};
            console.log(currentPlayer);
            
        })

        $(".high-card-row .card5").on("click", function(){
            var selectedCard = {num:0,name:"",icon:""};
            let selected = $(this);
            selectedCard.num = +Number((selected.find(highNum5).text()));
            selectedCard.name= selected.find(highName5).text();
            selectedCard.icon= selected.find(highIcon5).text();
            selectedCard.type = selected.find(highType5).text();
            selectedCard.effect = selected.find(highEffect5).text();
            selectedCard.cost = +Number((selected.find(highCost5).text()));
            console.log(selectedCard);
            if(validateTransaction(currentPlayer,selectedCard))
            {
                editMoney(currentPlayer,moneyDisplays[index],-1*selectedCard.cost)
                addCard(currentPlayer, selectedCard);
                nextPlayer(Players, rollhtml,playerDisplays);
                if(deckHigh.length === 0)
            {
                selected.children().css("display",'none');
                assignHighCardS(selectedCard);
            }
            else{
            drawHighCard();
            assignHighCard5(drawnCard);
            assignHighCardS(selectedCard);
            }
            }
            else{
                alert('Cannot purchase card'); 
            }
            console.log(currentPlayer);
            
        })
       
       

       /*
        let currentLowCard=deckLow[lowIndex];
        let currentHighCard=deckHigh[highIndex];

        lowNum1.html(currentLowCard.activation);
        lowName1.html(currentLowCard.name);
        lowIcon1.html(currentLowCard.icon);
        highNum.html(currentHighCard.activation);
        highName.html(currentHighCard.name);
        highIcon.html(currentHighCard.icon);
        console.log(lowIndex);
        console.log(highIndex);

     /*  $.each(deck,function(index,value){
           info += "<tr id='row'>";
           info += "<td id='type"+index+"'>"+value.type+"</td>";
           info += "<td id='icon"+index+"'>"+value.icon+"</td>";
           info += "<td id='activation"+index+"'>"+value.activation+"</td>";
           info += "<td id='quantity"+index+"'>"+value.quantity+"</td>";
           info += "<td id='name"+index+"'>"+value.name+"</td>";
           info += "</tr>";
         
        });*/

    
    });
    console.log(deckLow);
    console.log(deckHigh);
        

});

</script>